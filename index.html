<script>
    // Check if the Telegram object is available
    if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
        // Initialize the Telegram Web App
        Telegram.WebApp.ready();

        function calculateRewards() {
            const power = document.getElementById('powerInput').value;
            if (!power) {
                alert("Please enter your power.");
                return;
            }

            // Send data to the bot backend
            Telegram.WebApp.sendData(JSON.stringify({ power: power }));
        }

        // Handle data received from the bot backend
        Telegram.WebApp.onEvent('messageReceived', (data) => {
            const resultDiv = document.getElementById('result');
            resultDiv.textContent = data;
        });

        // Expand the Mini App to full screen
        Telegram.WebApp.expand();
    } else {
        // Fallback for testing outside Telegram
        console.warn("Telegram.WebApp is not available. Running in a non-Telegram environment.");

        function calculateRewards() {
            const power = document.getElementById('powerInput').value;
            if (!power) {
                alert("Please enter your power.");
                return;
            }

            // Simulate sending data (for testing purposes)
            const resultDiv = document.getElementById('result');
            resultDiv.textContent = `Simulated result for power: ${power} PH/s`;
        }
    }
</script>
